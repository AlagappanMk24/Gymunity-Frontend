<div class="gm-auth">
  <div class="gm-auth__bg">
    <div class="gm-orb gm-orb--1"></div>
    <div class="gm-orb gm-orb--2"></div>
    <div class="gm-orb gm-orb--3"></div>
    <div class="gm-auth__noise"></div>
  </div>

  <div class="gm-auth__inner">

    <!-- Left Panel -->
    <div class="gm-auth__panel">
      <a routerLink="/landing" class="gm-auth__back">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 5l-7 7 7 7"/></svg>
        Back to home
      </a>

      <div class="gm-auth__brand">
        <div class="gm-auth__brand-icon">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/>
          </svg>
        </div>
        <span class="gm-auth__brand-name">Gymunity</span>
      </div>

      <div class="gm-auth__panel-content">
        <h1 class="gm-auth__panel-title">
          Recover<br>your<br><em>account.</em>
        </h1>
        <p class="gm-auth__panel-desc">
          Don't worry — it happens to the best of us. We'll get you back to your fitness journey in no time.
        </p>
      </div>

      <div class="gm-auth__features">
        <div class="gm-auth__feature">
          <div class="gm-auth__feature-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
          </div>
          <div>
            <p class="gm-auth__feature-title">Transform Your Body</p>
            <p class="gm-auth__feature-desc">Achieve your goals with expert guidance</p>
          </div>
        </div>
        <div class="gm-auth__feature">
          <div class="gm-auth__feature-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
          </div>
          <div>
            <p class="gm-auth__feature-title">Connect With Community</p>
            <p class="gm-auth__feature-desc">Join thousands of fitness enthusiasts</p>
          </div>
        </div>
        <div class="gm-auth__feature">
          <div class="gm-auth__feature-icon">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/></svg>
          </div>
          <div>
            <p class="gm-auth__feature-title">Track Your Progress</p>
            <p class="gm-auth__feature-desc">Monitor workouts and celebrate wins</p>
          </div>
        </div>
      </div>

      <div class="gm-auth__stats">
        <div class="gm-auth__stat">
          <span class="gm-auth__stat-num">500+</span>
          <span class="gm-auth__stat-label">Trainers</span>
        </div>
        <div class="gm-auth__stat-divider"></div>
        <div class="gm-auth__stat">
          <span class="gm-auth__stat-num">50K+</span>
          <span class="gm-auth__stat-label">Members</span>
        </div>
        <div class="gm-auth__stat-divider"></div>
        <div class="gm-auth__stat">
          <span class="gm-auth__stat-num">1K+</span>
          <span class="gm-auth__stat-label">Programs</span>
        </div>
      </div>
    </div>

    <!-- Right Form Panel -->
    <div class="gm-auth__form-panel">
      <div class="gm-auth__mobile-brand">
        <div class="gm-auth__brand-icon gm-auth__brand-icon--sm">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/></svg>
        </div>
        <span class="gm-auth__brand-name gm-auth__brand-name--dark">Gymunity</span>
      </div>

      <div class="gm-auth__form-card">

        <!-- Icon header -->
        <div class="gm-otp__icon-wrap">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/></svg>
        </div>

        <!-- Before send -->
        <ng-container *ngIf="!emailSent()">
          <div class="gm-auth__form-header">
            <h2 class="gm-auth__form-title">Forgot Password?</h2>
            <p class="gm-auth__form-subtitle">Enter your email and we'll send you a reset link</p>
          </div>

          <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="gm-auth__form">

            <div class="gm-field">
              <label class="gm-field__label">Email Address</label>
              <div class="gm-field__wrap">
                <svg class="gm-field__icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
                <input
                  type="email"
                  formControlName="email"
                  placeholder="your@email.com"
                  class="gm-field__input"
                  [class.gm-field__input--error]="forgotPasswordForm.get('email')?.invalid && forgotPasswordForm.get('email')?.touched"
                />
              </div>
              <p class="gm-field__error" *ngIf="forgotPasswordForm.get('email')?.invalid && forgotPasswordForm.get('email')?.touched">
                Please enter a valid email address
              </p>
            </div>

            <div class="gm-alert gm-alert--error" *ngIf="error()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="flex-shrink:0"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
              {{ error() }}
            </div>

            <button
              type="submit"
              class="gm-submit"
              [class.gm-submit--loading]="isLoading()"
              [disabled]="isLoading() || forgotPasswordForm.invalid"
            >
              <span *ngIf="!isLoading()" class="gm-submit__content">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07A19.5 19.5 0 013.07 8.63a19.79 19.79 0 01-3.07-8.67A2 2 0 012 0h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L6.91 7.91a16 16 0 006.72 6.72l1.28-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/></svg>
                Send Reset Link
              </span>
              <span *ngIf="isLoading()" class="gm-submit__loading">
                <span class="gm-submit__spinner"></span>
                Sending…
              </span>
            </button>

          </form>
        </ng-container>

        <!-- After send — success state -->
        <ng-container *ngIf="emailSent()">
          <div class="gm-status gm-status--success">
            <div class="gm-status__icon">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
            </div>
            <h3 class="gm-status__title">Reset Link Sent!</h3>
            <p class="gm-status__desc">
              We've sent a password reset link to<br>
              <strong>{{ email() }}</strong><br>
              The link expires in 10 minutes.
            </p>
          </div>

          <div class="gm-otp__resend" style="margin-top:24px">
            <p class="gm-otp__resend-label">Didn't receive the email?</p>
            <button
              type="button"
              (click)="resendEmail()"
              [disabled]="resendDisabled()"
              class="gm-otp__resend-btn"
              [class.gm-otp__resend-btn--disabled]="resendDisabled()"
            >
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 .49-3.5"/></svg>
              Click here to resend
            </button>
            <p class="gm-otp__resend-timer" *ngIf="resendDisabled() && resendTimer() > 0">
              Resend available in {{ formatTime(resendTimer()) }}
            </p>
          </div>
        </ng-container>

        <div class="gm-auth__form-footer">
          <p>
            <a routerLink="/auth/login" class="gm-auth__form-link">← Back to Login</a>
          </p>
          <p style="margin-top:8px">
            Need help?
            <a href="mailto:support@gymunity.com" class="gm-auth__form-link">Contact Support</a>
          </p>
        </div>

      </div>
    </div>

  </div>
</div>